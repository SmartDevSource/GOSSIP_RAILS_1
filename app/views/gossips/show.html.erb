<!DOCTYPE html>
<html>
    <center>      
      <h1><p class = "text-secondary"><%= @index.title %></h1></p>
      <p>par <%= link_to "#{@user.first_name}", user_path(@user.id), :class=>"my_link" %></a> le <%= @index.created_at.strftime("%d/%m/%Y %H:%M") %></p>
      <p>Depuis la ville de <%= link_to "#{City.find(@user.city_id).name}", city_path(@user.city_id), :class=>"my_link" %></a></p> 
      <br>
      <p><%= @index.content %></p>
      <br><%= button_to "Modifier ce potin", edit_gossip_path(@index.id), :class=>"btn btn-warning", method: :get %>
      <%= button_to "Détruire ce potin", gossip_path(@index.id), :class=>"btn btn-danger", form: { data:{turbo_confirm: "Êtes-vous CERTAIN(E) ?"}}, method: :delete %>
      <br><br>
      <br><h4><p class = "text-secondary">Espace commentaires</p></h4>

      <br>
        Il y a <%=@index.comments.count %> commentaires.
      <br>
      
      <% Comment.all.each do |c| %>
        <% if c.gossip_id == @index.id%>
          <br><%=User.find_by(id: c.user_id).first_name %> : <%= c.content%> - 
          <%=button_to "Editer", edit_gossip_comment_url(@index, c.id), :class=>"btn btn-warning", method: :get %>
          <%=button_to "Supprimer", gossip_comment_path(@index, c.id), :class=>"btn btn-danger", form: { data:{turbo_confirm: "Êtes-vous CERTAIN(E) ?"}}, method: :delete %>
          <br>
        <% end %>
      <% end %>
      
      <br><br>
      <h1><p class = "text-secondary">Rédiger un commentaire</h1></p>
      <br>

      <%= form_tag(gossip_comments_path(@index), method: :post) do%>
        <%= label_tag "Rédiger un commentaire" %>
        <br><br>
        <%= text_area_tag :content, nil, placeholder: "Votre commentaire...", rows: 5, cols: 50 %>
        <br><br>
        <%= submit_tag "Publier ce commentaire.", data: {turbo:false} %>
      <% end %>
      
      <br><br><br>
      <%= link_to "Revenir à la page d'accueil", root_path, :class=>"navbar-brand my_link" %>

    </center>
    
  </body>
</html>